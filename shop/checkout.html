<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout - Custom IT Support Mining</title>

<link rel="icon" type="image/x-icon" href="/static/favicon.ico">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/feather-icons"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap');

body {
    font-family: 'Space Grotesk', sans-serif;
    background-color: #0f172a;
    color: #e2e8f0;
}

.content-card {
    background: rgba(15, 23, 42, 0.7);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 0.5rem;
}

.form-input {
    background: rgba(15, 23, 42, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
}

.form-input:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 1px #3b82f6;
}
</style>
</head>

<body>

<nav class="bg-slate-900 border-b border-slate-700">
<div class="container mx-auto px-6 py-4 flex justify-between items-center">
<div class="flex items-center">
<i data-feather="cpu" class="w-8 h-8 text-blue-500 mr-3"></i>
<a href="index.html" class="text-xl font-bold text-white">
Custom IT Support Mining
</a>
</div>
<a href="cart.html" class="text-slate-300 hover:text-white">
<i data-feather="arrow-left"></i>
</a>
</div>
</nav>

<section class="py-16">
<div class="container mx-auto px-4 max-w-6xl">
<h1 class="text-3xl font-bold mb-8 text-center">Checkout</h1>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

<!-- ORDER SUMMARY -->
<div class="content-card p-6">
<h2 class="text-xl font-bold mb-6 flex items-center">
<i data-feather="shopping-cart" class="w-5 h-5 mr-2"></i>
Order Summary
</h2>

<ul id="checkout-items" class="space-y-4 mb-6"></ul>

<div class="border-t border-slate-700 pt-4">
<div class="flex justify-between mb-2">
<span>Subtotal:</span>
<span id="subtotal">€0.00</span>
</div>

<div class="flex justify-between mb-2">
<span>Shipping:</span>
<span id="shipping">€0.00</span>
</div>

<div class="flex justify-between mb-2">
<span>VAT (21%):</span>
<span id="vat">€0.00</span>
</div>

<div class="flex justify-between text-lg font-bold mt-4 pt-4 border-t border-slate-700">
<span>Total:</span>
<span id="total">€0.00</span>
</div>
</div>
</div>

<!-- FORM -->
<div class="content-card p-6">

<form id="checkout-form"
action="https://formsubmit.co/rp@customitsupport.com"
method="POST"
class="space-y-4">

<input type="hidden" name="_subject" value="New Order - Custom IT Support Mining">
<input type="hidden" name="_captcha" value="false">
<input type="hidden" name="_next" value="https://customitsupport.com/shop/order-confirmation.html">
<input type="hidden" name="Cart Items" id="cart-data">
<input type="hidden" name="Order Summary" id="order-summary">
<input type="hidden" name="Order ID" id="order-id">

<div>
<label class="block text-sm mb-2">Full Name</label>
<input type="text" name="Full Name" class="w-full p-3 rounded-lg form-input" required>
</div>

<div>
<label class="block text-sm mb-2">Email</label>
<input type="email" name="Email" class="w-full p-3 rounded-lg form-input" required>
</div>

<div>
<label class="block text-sm mb-2">Phone</label>
<input type="tel" name="Phone" class="w-full p-3 rounded-lg form-input" required>
</div>

<div>
<label class="block text-sm mb-2">Address</label>
<textarea name="Address" rows="3" class="w-full p-3 rounded-lg form-input" required></textarea>
</div>

<div class="grid grid-cols-2 gap-4">
<div>
<label class="block text-sm mb-2">Post Code</label>
<input type="text" name="Post Code" class="w-full p-3 rounded-lg form-input" required>
</div>

<div>
<label class="block text-sm mb-2">City</label>
<input type="text" name="City" class="w-full p-3 rounded-lg form-input" required>
</div>
</div>

<div>
<label class="block text-sm mb-2">Country</label>
<select id="country" name="Country" class="w-full p-3 rounded-lg form-input" required>
<option value="">Select Country</option>
<option value="NL">Netherlands</option>
<option value="BE">Belgium</option>
<option value="DE">Germany</option>
<option value="FR">France</option>
<option value="ES">Spain</option>
<option value="IT">Italy</option>
<option value="other">Other</option>
</select>
</div>

<h2 class="text-xl font-bold mt-8 mb-6 flex items-center">
<i data-feather="credit-card" class="w-5 h-5 mr-2"></i>
Payment Method
</h2>

<div class="space-y-3">
<label class="flex items-center">
<input type="radio" name="Payment Method" value="iDEAL" class="mr-3" checked> iDEAL
</label>
<label class="flex items-center">
<input type="radio" name="Payment Method" value="Bank Transfer" class="mr-3"> Bank Transfer
</label>
<label class="flex items-center">
<input type="radio" name="Payment Method" value="Cash on Delivery" class="mr-3"> Cash on Delivery
</label>
</div>

<button type="submit"
class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium mt-8 transition">
Complete Order
</button>

</form>
</div>
</div>
</div>
</section>

<script>
feather.replace();

document.addEventListener("DOMContentLoaded", () => {

const cart = JSON.parse(localStorage.getItem("cart")) || [];
if (cart.length === 0) {
window.location.href = "cart.html";
return;
}

const savedCountry = localStorage.getItem("shippingCountry");
if (savedCountry) {
document.getElementById("country").value = savedCountry;
}

const itemsEl = document.getElementById("checkout-items");
let subtotal = 0;

cart.forEach(item => {
const qty = item.quantity || 1;
const totalItem = item.price * qty;
subtotal += totalItem;

const li = document.createElement("li");
li.className = "flex justify-between border-b border-slate-700 pb-2";
li.innerHTML = `<span>${item.name} (x${qty})</span>
<span>€${totalItem.toFixed(2)}</span>`;
itemsEl.appendChild(li);
});

const shippingPrices = {
NL: 15,
BE: 15,
DE: 20,
FR: 25,
ES: 30,
IT: 30,
other: 50
};

function updateTotals() {
const country = document.getElementById("country").value;
const shipping = shippingPrices[country] || 0;
const vat = subtotal * 0.21;
const total = subtotal + shipping + vat;

document.getElementById("subtotal").textContent = `€${subtotal.toFixed(2)}`;
document.getElementById("shipping").textContent = `€${shipping.toFixed(2)}`;
document.getElementById("vat").textContent = `€${vat.toFixed(2)}`;
document.getElementById("total").textContent = `€${total.toFixed(2)}`;
}

function generateOrderID() {
const now = new Date();
const day = String(now.getDate()).padStart(2, "0");
const month = String(now.getMonth() + 1).padStart(2, "0");
const year = now.getFullYear();

const todayKey = day + month + year;

let counter = parseInt(localStorage.getItem("dailyOrderCounter")) || 0;
const lastDate = localStorage.getItem("lastOrderDate");

if (lastDate !== todayKey) {
counter = 0;
}

counter += 1;

localStorage.setItem("dailyOrderCounter", counter);
localStorage.setItem("lastOrderDate", todayKey);

return todayKey + "-" + String(counter).padStart(2, "0");
}

document.getElementById("country").addEventListener("change", updateTotals);
updateTotals();

document.getElementById("checkout-form").addEventListener("submit", function() {

const orderID = generateOrderID();
document.getElementById("order-id").value = orderID;
localStorage.setItem("lastOrderID", orderID);

let cartText = "";
cart.forEach(item => {
cartText += `${item.name} | Qty: ${item.quantity || 1} | €${item.price}\n`;
});

document.getElementById("cart-data").value = cartText;
document.getElementById("order-summary").value =
`Subtotal: €${subtotal.toFixed(2)}
Shipping: ${document.getElementById("shipping").textContent}
VAT: ${document.getElementById("vat").textContent}
Total: ${document.getElementById("total").textContent}`;

localStorage.removeItem("cart");
localStorage.removeItem("shippingCountry");

});

});
</script>

</body>
</html>
